@model TFI.OCM.Amministrativo.GestioneRapportiLavoroIscrittiOCM
@{
    ViewBag.Title = "Inserimento Rapporto Lavoro";
    Layout = "~/Views/Shared/_LayoutContainer.cshtml";
}

@{
    var rdl = Model;
}

<style>
    .btn:hover {
        background-color: #0c773c;
    }

    body.wait *, body.wait {
        cursor: progress !important;
    }
</style>

@using (Html.BeginForm("InserimentoRapportiLavoro", "Amministrativo", FormMethod.Post, new { rdl = rdl }))
{

    <div class="card">
        <div class="card-header" style="background: #0c773c;text-align: center;width: 100%;color: white;font-size: 25px">
            Inserimento dati RDL : <label id="nominativosel" name="nominativosel"></label>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <div class="card-body" style="padding:initial">
                        <div class="row">
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>Posizione</label>
                                    <input type="text" class="form-control" asp-for="codposAz" value="@Model.aziendaUtilizzatrice.codposAz" name="codposAz" id="codposAz" hidden>
                                    <input type="text" class="form-control" value="@Model.aziendaUtilizzatrice.codposAz" readonly>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Ragione Sociale</label>
                                    <input type="text" class="form-control" asp-for="ragsocAz" value="@Model.aziendaUtilizzatrice.ragsocAz" name="ragsocAz" id="ragsocAz" hidden>
                                    <input type="text" class="form-control" value="@Model.aziendaUtilizzatrice.ragsocAz" readonly>
                                </div>
                            </div>
                        </div>
                        <div class="row " id="ricercamatricola" name="ricercamatricola">
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>Matricola</label>
                                    <input type="text" class="form-control" asp-for="mat" name="mat" id="mat">
                                    <input type="text" asp-for="datiNONModificati" name="datiNONModificati" id="datiNONModificati" hidden />
                                    <input type="text" asp-for="datiRecapitiOld" name="datiRecapitiOld" id="datiRecapitiOld" hidden />
                                    <input type="text" asp-for="datiAnagraficiOld" name="datiAnagraficiOld" id="datiAnagraficiOld" hidden />
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>Cognome</label>
                                    <input type="text" class="form-control" asp-for="cogric" name="cogric" id="cogric">
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>Nome</label>
                                    <input type="text" class="form-control" asp-for="nomric" name="nomric" id="nomric">
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>Codice Fiscale</label>
                                    <input type="text" class="form-control" asp-for="codfisric" name="codfisric" id="codfisric">
                                </div>
                            </div>
                        </div>
                        <div class="row ">

                            <div class="col-sm-4">
                                <div style="text-align: center; margin-top: 12%;display:none;" id="somministrazione" name="somministrazione">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckIndeterminate">
                                    <label>Azienda in Somministrazione</label>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <label>&nbsp;</label>
                                <button type="button" onclick="CercaMatricola()" class="btn btn-block btn-outline-success btn-lg">Cerca Iscritto</button>
                            </div>
                            <div class="col-sm-2">
                                <label>&nbsp;</label>
                            </div>
                            <div class="col-sm-3" id="btnNewIsc" name="btnNewIsc">
                                <label>&nbsp;</label>
                                <button type="button" onclick="NuovoIscritto()" class="btn btn-block btn-outline-success btn-lg">Nuovo Iscritto</button>
                            </div>
                        </div>

                        <br />
                        <div class="row" id="paneltab" style="display:none">
                            <div class="col-sm-12">
                                <div class="card card-success card-tabs">
                                    <div class="card-header p-0 pt-1" style="background-color: #0c773c;">
                                        <ul class="nav nav-tabs" id="custom-tabs-one-tab" role="tablist">
                                            <li class="nav-item col-sm-3">
                                                <a class="nav-link active" id="custom-tabs-one-home-tab" data-toggle="pill" href="#custom-tabs-one-home" role="tab" aria-controls="custom-tabs-one-home" aria-selected="true">Dati Anagrafici</a>
                                            </li>
                                            <li class="nav-item col-sm-3">
                                                <a class="nav-link" id="custom-tabs-one-profile-tab" data-toggle="pill" href="#custom-tabs-one-profile" role="tab" aria-controls="custom-tabs-one-profile" aria-selected="false">Dati Contrattuali</a>
                                            </li>
                                            <li class="nav-item col-sm-3">
                                                <a class="nav-link" id="custom-tabs-one-messages-tab" data-toggle="pill" href="#custom-tabs-one-messages" role="tab" aria-controls="custom-tabs-one-messages" aria-selected="false">Dati Retributivi</a>
                                            </li>
                                            <li class="nav-item col-sm-3">
                                                <a class="nav-link" id="custom-tabs-one-settings-tab" data-toggle="pill" href="#custom-tabs-one-settings" role="tab" aria-controls="custom-tabs-one-settings" aria-selected="false" style="display:none">Azienda utilizzatrice</a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="card-body">
                                        <div class="tab-content" id="custom-tabs-one-tabContent">
                                            <div class="tab-pane fade show active" id="custom-tabs-one-home" role="tabpanel" aria-labelledby="custom-tabs-one-home-tab">
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Cognome</label>
                                                            <input type="text" asp-for="cognome" name="cognome" id="cognome" class="form-control" placeholder="Inserire Cognome">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Nome</label>
                                                            <input type="text" asp-for="nome" name="nome" id="nome" class="form-control" placeholder="Inserire Nome">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Codice Fiscale</label>
                                                            <input type="text" id="codfis" asp-for="codfis" name="codfis" class="form-control" placeholder="Inserire Codice Fiscale">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Comune di Nascita</label>
                                                            <input type="text" id="comuneN" asp-for="comuneN" name="comuneN" class="form-control">
                                                            <input type="text" id="comuneCodN" asp-for="comuneCodN" name="comuneCodN" class="form-control" hidden>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <div class="form-group">
                                                            <label>Provincia di Nascita</label>
                                                            <input type="text" id="provN" asp-for="provN" name="provN" class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Data Nascita</label>
                                                            <input type="date" id="datnas" asp-for="datnas" name="datnas" class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <div class="form-group">
                                                            <label>Sesso</label>
                                                            <input id="sesso" asp-for="sesso" name="sesso" class="form-control" />
                                                            @*<select class="form-control" id="sesso" asp-for="sesso" name="sesso">
                                                                    <option>M</option>
                                                                    <option>F</option>
                                                                </select>*@
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-5">
                                                        <div class="form-group">
                                                            <label>Stato Estero</label>
                                                            <input type="text" id="statoEsN" asp-for="statoEsN" name="statoEsN" class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-5">
                                                        <div class="form-group autocomplete">
                                                            <label>Titolo di Studio</label>
                                                            @*<select class="form-control" id="titoloStudio" asp-for="titoloStudio" name="titoloStudio">
                                                                    @foreach (var i in Model.listTitoli)
                                                                    {
                                                                        <option value="@i.codtitstu">@i.dentistu</option>
                                                                    }
                                                                </select>*@
                                                            <input id="titoloStudio" asp-for="titoloStudio" name="titoloStudio" class="form-control">
                                                            <input id="titoloStudioCod" asp-for="titoloStudioCod" name="titoloStudioCod" class="form-control" hidden>
                                                        </div>
                                                    </div>
                                                </div>
                                                <hr />
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Indirizzo di Residenza</label>
                                                            <select id="dug" asp-for="dug" name="dug" class="form-control">
                                                                <option selected disabled></option>
                                                                @foreach (var i in Model.listaIndirizzi)
                                                                {
                                                                    <option value="@i.coddug">@i.dendug</option>
                                                                }
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>&nbsp;</label>
                                                            <input type="text" class="form-control" placeholder="Inserire Indirizzo" id="indirizzo" asp-for="indirizzo" name="indirizzo">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Civico</label>
                                                            <input type="text" class="form-control" placeholder="Inserire numero civico" id="numciv" asp-for="numciv" name="numciv">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Comune</label>
                                                            <input type="text" placeholder="Inserire comune residenza" class="form-control" id="comune" asp-for="comune" name="comune">
                                                            <input type="text" placeholder="Inserire comune residenza" class="form-control" id="comuneCod" asp-for="comuneCod" name="comuneCod" hidden>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Cap</label>
                                                            <input type="text" placeholder="Insrire cap residenza" class="form-control" id="cap" asp-for="cap" name="cap">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Provincia</label>
                                                            <input type="text" placeholder="Inserire provincia residenza" class="form-control" pattern=".{2}" id="prov" asp-for="prov" name="prov">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Località</label>
                                                            <input type="text" placeholder="Inserire località residenza" class="form-control" id="localita" asp-for="localita" name="localita">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Stato Estero</label>
                                                            <input type="text" placeholder="Inserire stato estero residenza" class="form-control" id="statoEs" asp-for="statoEs" name="statoEs">
                                                        </div>
                                                    </div>
                                                    @*<div class="col-sm-4">
                                                            <div class="form-group">
                                                                <label>C/O</label>
                                                                <input type="text" class="form-control" id="co" name="co" asp-for="co">
                                                            </div>
                                                        </div>*@
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Telefono</label>
                                                            <input type="tel" placeholder="Inserire recapito telefonico" class="form-control" id="tel" asp-for="tel" name="tel">
                                                        </div>
                                                    </div>
                                                    @*<div class="col-sm-4">
                                                            <div class="form-group">
                                                                <label>Telefono 2</label>
                                                                <input type="tel" class="form-control" placeholder="Inserire secondo recapito telefonico" id="tel2" asp-for="tel2" name="tel2">
                                                            </div>
                                                        </div>*@
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Cellulare</label>
                                                            <input type="tel" placeholder="Inserire recapito cellulare" class="form-control" pattern=".{10}" id="cellulare" asp-for="cellulare" name="cellulare" required>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Email</label>
                                                            <input type="email" placeholder="Inserire email" class="form-control" id="email" asp-for="email" name="email">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Posta Elettronica Certificata</label>
                                                            <input type="email" placeholder="Inserire pec" class="form-control" id="pec" asp-for="pec" name="pec">
                                                        </div>
                                                    </div>
                                                    @*<div class="col-sm-4">
                                                            <div class="form-group">
                                                                <label>Fax</label>
                                                                <input type="tel" placeholder="Inserire fax" class="form-control" id="fax" asp-for="fax" name="fax">
                                                            </div>
                                                        </div>*@
                                                </div>
                                                <br />

                                            </div>
                                            <div class="tab-pane fade" id="custom-tabs-one-profile" role="tabpanel" aria-labelledby="custom-tabs-one-profile-tab">
                                                <div class="row">
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Data iscrizione</label>
                                                            <input type="date" id="datisc" name="datisc" asp-for="datisc" class="form-control">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Data assunzione</label>
                                                            <input type="date" id="datAssunzione" name="datAssunzione" asp-for="datAssunzione" class="form-control" readonly>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Data denuncia</label>
                                                            <input type="date" id="datDenuncia" name="datDenuncia" asp-for="datDenuncia" class="form-control" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                                @*<div class="row">
                                                        <div class="col-sm-3">
                                                            <div class="form-group">
                                                                <label>Numero Protocollo</label>
                                                                <input type="number" class="form-control" name="numProtocollo" asp-for="numProtocollo" maxlength="8" id="numProtocollo" required>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <div class="form-group">
                                                                <label>Data Protocollo</label>
                                                                <input type="date" class="form-control" name="datProtocollo" asp-for="datProtocollo" id="datProtocollo" required>
                                                            </div>
                                                        </div>
                                                    </div>*@
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Tipo di rapporto</label>
                                                            <select class="form-control" id="tiprap" asp-for="tiprap" name="tiprap" disabled>
                                                                <option selected disabled></option>
                                                                @foreach (var i in Model.listTipRap)
                                                                {
                                                                    <option value="@i.tiprap">@i.dentiprap</option>
                                                                }
                                                            </select>
                                                        </div>
                                                    </div>&nbsp;&nbsp;
                                                    <div class="row">
                                                        &nbsp;<div class="form-group" style="display:none" id="data_termine">
                                                            <label> Data Termine</label>
                                                            <input type="date" id="datScadenzaTermine" name="datScadenzaTermine" class="form-control" />
                                                        </div>&nbsp;&nbsp;
                                                        <div class="form-group" style="display:none" id="part_time">
                                                            <label>% Part-Time</label>
                                                            <input type="number" id="perParTime" name="perParTime" class="form-control" />
                                                        </div>&nbsp;&nbsp;
                                                    </div>
                                                    <div class="row">
                                                        <div class="form-group" style="display:none" id="durataperiodo" name="durataperiodo" asp-for="durataperiodo">
                                                            <label>Durata Periodo</label>
                                                            <select class="form-control">
                                                                <option>24</option>
                                                                <option>36</option>
                                                                <option>48</option>
                                                            </select>
                                                        </div>&nbsp;&nbsp;
                                                        <div class="form-group" style="display:none" id="durataperiodo2" name="durataperiodo2" asp-for="durataperiodo2">
                                                            <label>Durata Periodo</label>
                                                            <select class="form-control">
                                                                <option>15</option>
                                                            </select>
                                                        </div>
                                                    </div>&nbsp;&nbsp;&nbsp;&nbsp;
                                                    <div class="row">
                                                        <div class="row">
                                                            &nbsp;&nbsp;&nbsp;&nbsp;<div class="form-group" style="display:none" id="da_al">
                                                                <label>Da</label>&nbsp;&nbsp;
                                                                <input type="date" id="PrimoImpiegoDal1" name="PrimoImpiegoDal1" class="form-control" />
                                                                <label>Da</label>&nbsp;&nbsp;
                                                                <input type="date" id="PrimoImpiegoDal2" name="PrimoImpiegoDal2" class="form-control" />
                                                                <label>Da</label>&nbsp;&nbsp;
                                                                <input type="date" id="PrimoImpiegoDal3" name="PrimoImpiegoDal3" class="form-control" />
                                                            </div>&nbsp;&nbsp;
                                                        </div>&nbsp;&nbsp;
                                                        <div class="row">
                                                            &nbsp;&nbsp;<div class="form-group" style="display:none" id="da_al2">
                                                                <label>Al</label>&nbsp;&nbsp;
                                                                <input type="date" id="PrimoImpiegoAl1" name="PrimoImpiegoAl1" class="form-control" />
                                                                <label>Al</label>&nbsp;&nbsp;
                                                                <input type="date" id="PrimoImpiegoAl2" name="PrimoImpiegoAl2" class="form-control" />
                                                                <label>Al</label>&nbsp;&nbsp;
                                                                <input type="date" id="PrimoImpiegoAl3" name="PrimoImpiegoAl3" class="form-control" />
                                                            </div>&nbsp;&nbsp;
                                                        </div>&nbsp;&nbsp;
                                                        <div class="row">
                                                            &nbsp;&nbsp;<div class="form-group" style="display:none" id="da_al3">
                                                                <label>%</label>&nbsp;&nbsp;
                                                                <input type="number" id="FrazPrimoImpiego1" name="FrazPrimoImpiego1" class="form-control" />
                                                                <label>%</label>&nbsp;&nbsp;
                                                                <input type="number" id="FrazPrimoImpiego2" name="FrazPrimoImpiego2" class="form-control" />
                                                                <label>%</label>&nbsp;&nbsp;
                                                                <input type="number" id="FrazPrimoImpiego3" name="FrazPrimoImpiego3" class="form-control" />
                                                            </div>&nbsp;&nbsp;
                                                        </div>&nbsp;&nbsp;
                                                    </div>
                                                    <div class="row">
                                                        <div class="form-group" style="display:none" id="mesi" name="mesi" asp-for="mesi">
                                                            <label>Gennaio</label>
                                                            <input type="checkbox" id="gennaio" name="gennaio" asp-for="gennaio" />&nbsp;&nbsp;
                                                            <label>Febbraio</label>
                                                            <input type="checkbox" id="febbraio" name="febbraio" asp-for="febbraio" />&nbsp;&nbsp;
                                                            <label>Marzo</label>
                                                            <input type="checkbox" id="marzo" name="marzo" asp-for="marzo" />&nbsp;&nbsp;
                                                            <label>Aprile</label>
                                                            <input type="checkbox" id="aprile" name="aprile" asp-for="aprile" />&nbsp;&nbsp;
                                                            <label>Maggio</label>
                                                            <input type="checkbox" id="maggio" name="maggio" asp-for="maggio" />&nbsp;&nbsp;
                                                            <label>Giugno</label>
                                                            <input type="checkbox" id="giugno" name="giugno" asp-for="giugno" />&nbsp;&nbsp;
                                                            <label>Luglio</label>
                                                            <input type="checkbox" id="luglio" name="luglio" asp-for="luglio" />&nbsp;&nbsp;
                                                            <label>Agosto</label>
                                                            <input type="checkbox" id="agosto" name="agosto" asp-for="agosto" />&nbsp;&nbsp;
                                                            <label>Settembre</label>
                                                            <input type="checkbox" id="settembre" name="settembre" asp-for="settembre" />&nbsp;&nbsp;
                                                            <label>Ottobre</label>
                                                            <input type="checkbox" id="ottobre" name="ottobre" asp-for="ottobre" />&nbsp;&nbsp;
                                                            <label>Novembre</label>
                                                            <input type="checkbox" id="novembre" name="novembre" asp-for="novembre" />&nbsp;&nbsp;
                                                            <label>Dicembre</label>
                                                            <input type="checkbox" id="dicembre" name="dicembre" asp-for="dicembre" />&nbsp;&nbsp;
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Contratto</label>
                                                            <select class="form-control" id="contratto" asp-for="contratto" name="contratto" disabled>
                                                            </select>
                                                            <input class="form-control" id="denconnew" asp-for="denconnew" name="denconnew" hidden />
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Livello</label>
                                                            <select class="form-control" id="livello" asp-for="livello" name="livello" disabled>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Qualifica</label>
                                                            <select class="form-control" id="qualifica" asp-for="qualifica" name="qualifica" disabled>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Numero mensilità</label>
                                                            <input type="number" class="form-control" id="mensilita" name="mensilita" asp-for="mensilita" min="0" max="99" pattern="\d*" placeholder="Inserire mensilità">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Mese corrispondente 14°</label>
                                                            <input type="number" class="form-control" id="mens14" name="mens14" asp-for="mens14" min="0" max="99" pattern="\d*" placeholder="Inserire mese 14°">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>15°</label>
                                                            <input type="text" class="form-control" id="mens15" name="mens15" asp-for="mens15" placeholder="Inserire mese 15°" disabled>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>16°</label>
                                                            <input type="text" class="form-control" id="mens16" name="mens16" asp-for="mens16" placeholder="Inserire mese 16°" disabled>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3" style="display:none">
                                                        <div class="form-group">
                                                            <input type="text" id="indirizzo" name="indirizzo" asp-for="indirizzo" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Aliquota contributiva</label>
                                                            <select type="text" id="aliqCont" name="aliqCont" asp-for="aliqCont" class="form-control" disabled>
                                                            </select>
                                                            <input type="text" class="form-control" asp-for="CODGRUASS" name="CODGRUASS" id="CODGRUASS" hidden>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Valore aliquota</label>
                                                            <input type="text" id="TOTALIQ" name="TOTALIQ" asp-for="TOTALIQ" class="form-control" readonly />
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1"></div>
                                                    <div class="col-sm-4">
                                                        <div class="row" id="rowtable" name="rowtable" hidden>
                                                            <table id="table" class="table table-hover " style="margin:auto">
                                                                <thead>
                                                                    <tr class="header" style="background:#0c773c;color:white">
                                                                        <th>Forma Assicurativa</th>
                                                                        <th>Aliquota</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody id="tableBody">
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>


                                                </div>
                                                <br>
                                                <div class="row">
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <div class="icheck-success d-inline">
                                                                <label>
                                                                    Assistenza contrattuale
                                                                </label>
                                                                <input type="checkbox" id="asscontr" name="asscontr" asp-for="asscontr" class="form-control" style="width:6%; margin:auto">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="icheck-success d-inline">
                                                            <label>
                                                                Fap
                                                            </label>
                                                            <input type="checkbox" id="FAP" name="FAP" asp-for="FAP" class="form-control" style="width:6%;margin-left:20%">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="icheck-success d-inline">
                                                            <label>
                                                                PA
                                                            </label>
                                                            <input type="checkbox" id="PA" name="PA" asp-for="PA" class="form-control" style="width:6%;margin-left:20%">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="custom-tabs-one-messages" role="tabpanel" aria-labelledby="custom-tabs-one-messages-tab">
                                                <div class="row">
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Emolumenti contrattuali (€)</label>
                                                            <input type="text" class="form-control" id="emolumenti" asp-for="emolumenti" name="emolumenti" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Retribuzione dichiarata (€)</label>
                                                            <input class="form-control" id="RetDichiarata" asp-for="RetDichiarata" name="RetDichiarata">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Scatti di anzianità</label>
                                                            <input type="number" class="form-control" id="scattiAnz" asp-for="scattiAnz" min="0" name="scattiAnz">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Ultimo</label>
                                                            <input type="date" class="form-control" id="datUltSc" asp-for="datUltSc" name="datUltSc">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Prossimo</label>
                                                            <input type="date" class="form-control" id="datProsSc" asp-for="datProsSc" name="datProsSc">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Importo €</label>
                                                            <input type="text" class="form-control" id="importoSc" asp-for="importoSc" name="importoSc">
                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-5">
                                                        <div class="form-group">
                                                            <label>Emolumenti extracontrattuali per n° mensilità:</label>
                                                            <br />
                                                            <label>12:</label>
                                                            <input type="text" class="form-control" id="S12" asp-for="S12" name="S12" placeholder="0,00 €">
                                                            <label>13:</label>
                                                            <input type="text" class="form-control" id="S13" asp-for="S13" name="S13" placeholder="0,00 €">
                                                            <label>14:</label>
                                                            <input type="text" class="form-control" id="S14" asp-for="S14" name="S14" placeholder="0,00 €">
                                                        </div>
                                                    </div>
                                                    <br />
                                                    <div class="col-sm-5">
                                                        <div class="form-group">
                                                            <label style="height: 17px;"></label>
                                                            <br />
                                                            <label>15:</label>
                                                            <input type="text" class="form-control" id="S15" asp-for="S15" name="S15" placeholder="0,00 €" readonly>
                                                            <label>16:</label>
                                                            <input type="text" class="form-control" id="S16" asp-for="S16" name="S16" placeholder="0,00 €" readonly>
                                                            <label>Totale:</label>
                                                            <input type="text" class="form-control" id="totaleS" asp-for="totaleS" name="totaleS" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="custom-tabs-one-settings" role="tabpanel" aria-labelledby="custom-tabs-one-settings-tab">
                                                <div class="row">
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Posizione</label>
                                                            <input type="text" class="form-control" id="codposAz2" asp-for="codposAz2" name="codposAz2">

                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Ragione sociale</label>
                                                            <input type="text" class="form-control" id="ragsocAz2" asp-for="ragsocAz2" name="ragsocAz2">

                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Codice fiscale</label>
                                                            <input type="text" class="form-control" id="codfisAz" asp-for="codfisAz" name="codfisAz">

                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Partita IVA</label>
                                                            <input type="text" class="form-control" id="parivaAz" asp-for="parivaAz" name="parivaAz">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Indirizzo di Residenza</label>
                                                            <input class="form-control" id="dugAz" asp-for="dugAz" name="dugAz">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="form-group">
                                                            <label>&nbsp;</label>
                                                            <input type="text" class="form-control" id="indirizzoAz" asp-for="indirizzoAz" name="indirizzoAz">

                                                        </div>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <div class="form-group">
                                                            <label>Civico</label>
                                                            <input type="text" class="form-control" id="civicoAz" asp-for="civicoAz" name="civicoAz">

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Comune</label>
                                                            <input type="text" class="form-control" id="comuneAz" asp-for="comuneAz" name="comuneAz">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>CAP</label>
                                                            <input type="text" class="form-control" id="capAz" asp-for="capAz" name="capAz">

                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Provincia</label>
                                                            <input type="text" class="form-control" id="provAz" asp-for="provAz" name="provAz">

                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <div class="form-group">
                                                            <label>Località</label>
                                                            <input type="text" class="form-control" id="localitaAz" asp-for="localitaAz" name="localitaAz">
                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Email</label>
                                                            <input type="text" class="form-control" id="emailAz" asp-for="emailAz" name="emailAz">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Pec</label>
                                                            <input type="text" class="form-control" id="pecAz" asp-for="pecAz" name="pecAz">

                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="form-group">
                                                            <label>Telefono</label>
                                                            <input type="text" class="form-control" id="telefonoAz" asp-for="telefonoAz" name="telefonoAz">

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div>
                                    <input type="text" class="form-control" id="TIPSPE" asp-for="TIPSPE" name="TIPSPE" hidden />
                                    <input type="text" class="form-control" id="CODLOC" asp-for="CODLOC" name="CODLOC" hidden />
                                    <input type="text" class="form-control" id="CODCOM" asp-for="CODCOM" name="CODCOM" hidden />

                                </div>
                                <!-- /.card -->
                            </div>
                        </div>
                        <div>
                            <div class="row justify-content-between">
                                <div class="col-sm-2">
                                    @Html.ActionLink("Indietro", "GestioneRapportiLavoroIscritti", "Amministrativo", routeValues: null, htmlAttributes: new { id = "IndietroLink", @class = "Indietro btn btn-block btn-outline-success btn-lg" })
                                </div>
                                <div class="col-sm-2" style="float: right">
                                    <input type="submit" value="Salva" name="Salva" id="Salva" asp-for="Salva" style="display:none" class=" btn btn-block btn-outline-success btn-lg">
                                </div>
                            </div>
                        </div>
                        <br />
                    </div>
                </div>
            </div>
        </div>
    </div>


}
<script>

    $("#indietro").click(function () {
        if (confirm("Are you sure you want to delete this?")) {
            window.location.href
        }
        else {
            return false;
        }
    });
    function Indietro() {
        confirm('Sicuro di voler uscire? I dati inseriti e non salvati andranno persi.');
        if (true) {

        }
    };
    function NuovoIscritto() {
        $("btnNewIsc").hide();
        $("#paneltab").show();
        $("#Salva").show();
        $("#somministrazione").show();
    }


    $('#somministrazione').click(function () {
        $("#custom-tabs-one-settings-tab").toggle(this.checked);
        $('#custom-tabs-one-home-tab').tab('show');
    });

    $("#datisc").on('change', function () {

        $("#datAssunzione").attr("readonly", false);
        $("#datDenuncia").attr("readonly", false);

                    });
    $("#datDenuncia").on('change', function () {
 $("#tiprap").removeAttr('disabled');
                    });

    $("#custom-tabs-one-messages-tab").on('click', function () {
                        tot = $("#TOTALIQ").val();
                        if (tot == '') {
                            alert("Inserire i campi in Dati Contrattuali per continuare");
                            return false;
                        }
                    });
                    function CercaMatricola() {



                        var mat = $("#mat").val();
                        var nom = $("#nomric").val();
                        var cog = $("#cogric").val();
                        var codfis = $("#codfisric").val();
    $('body').addClass('wait');

     $.ajax({

                        url: '@Url.Action("CercaMatricola", "Amministrativo")',
         data: { 'mat': mat, 'nom':nom,'cog':cog,'codfis':codfis},

         success: function (data)
         {
             $("#nominativosel").val(data.cognome + " " + data.nome);
                 $("#ultagg").val(data.ultagg);
                 $("#strdatnasold").val(data.nome);
                 $("#mat").text(data.matricola);
                 $("#cognome").val(data.cognome).prop("readonly", true);
                 $("#nome").val(data.nome).prop("readonly", true);
                 $("#codfis").val(data.codfis).prop("readonly", true);
                 $("#datnas").val(data.datnas).prop("readonly", true);
             /*var sesso = '<option disabled selected value="' + data.sesso + '">' + data.sesso + '</option>';*/
             $("#sesso").val(data.sesso).prop("readonly", true);
                    var via = '<option disabled selected value="' + data.coddug + '">' + data.dug + '</option>';
             //$("#dug").html(via);
             $("#dug").append(via);
                 $("#co").val(data.co);
                 $("#indirizzo").val(data.indirizzo);
                 $("#numciv").val(data.numciv);
                 $("#comuneN").val(data.comuneN).prop("readonly", true);
                 $("#comuneCodN").val(data.comuneCodN);
                 $("#provN").val(data.provN).prop("readonly", true);
                 $("#statoEsN").text(data.statoEsN).prop("readonly", true);
                 $("#statoEsCodN").val(data.nomestatoEsCodN);
                 $("#statoEs").val(data.statoEs);
                 $("#cap").val(data.cap);
                 $("#localita").val(data.localita);
                 $("#comuneCod").val(data.comuneCod);
                 $("#comune").val(data.comune);
                 $("#prov").val(data.prov);
                 $("#statocivile").val(data.statocivile);
             /*var titstu = '<option readonly selected value="' + data.titoloStudioCod + '">' + data.titoloStudio + '</option>';*/
             $("#titoloStudioCod").val(data.titoloStudioCod);
             $("#titoloStudio").val(data.titoloStudio).prop("readonly", true);
                 $("#pec").val(data.pec);
                 $("#email").val(data.email);
                 $("#cellulare").val(data.cellulare);
                 $("#tel").val(data.tel);
                 $("#tel2").val(data.tel2);
                 $("#fax").val(data.fax);
                 $("#url").val(data.url);
                 $("#datiNONModificati").val(data.datiNONModificati);
                 $("#datiRecapitiOld").val(data.datiRecapitiOld);
             $("#datiAnagraficiOld").val(data.datiAnagraficiOld);
             //$("#datisc").val(data.datisc);
             //$("#datAssunzione").val(data.datAssunzione);

             $("#paneltab").show();
             $("#Salva").show();
             $("#somministrazione").show();
                },
         error: function ()
         {
             $('body').removeClass('wait');
                    alert('Inserire Correttamente i Campi di Ricerca');
             $("#paneltab").hide();
             $("#Salva").hide();
                    //location.reload();
                },
         complete: function ()
         {
             $('body').removeClass('wait');

                },
     })
    };

    $("#custom-tabs-one-profile-tab").on('click', function () {
            data = $("#datnas").val();
            if (data == '') {
                alert("Inserire Data di Nascita per Determinare Correttamente l'Aliquota");
                return false;
            }
        });
    $("#titoloStudio").on('change', function () {
            var $option = $(this).find('option:selected');
            var titstu = $option.val();
        $("#titoloStudioCod").val(titstu);
        });

        $("#codposAz2").on('change', function () {

            var codposAz = $('#codposAz2').val();

            $.ajax({

            url:'@Url.Action("CercaAzienda", "Amministrativo")',
                     data: { 'codposAz': codposAz },
                  success: function (data)
                  {

                       $("#ragsocAz2").val(data.ragsocAz);
                       $("#codfisAz").val(data.codfisAz);
                       $("#parivaAz").val(data.parivaAz);
                       $("#localitaAz").val(data.localitaAz);
                       $("#dugAz").val(data.dugAz);
                       $("#indirizzoAz").val(data.indirizzoAz);
                       $("#civicoAz").val(data.civicoAz);
                       $("#provAz").val(data.provAz);
                       $("#capAz").val(data.capAz);
                       $("#telefonoAz").val(data.telefonoAz);
                      $("#comuneAz").val(data.comuneAz);
                      $("#emailAz").val(data.emailAz);
                      $("#pecAz").val(data.pecAz);

                    // $("#comuneCodAz").val(data.comuneCodAz);

                },
                     error: function ()
                     {
                         $("#ragsocAz2").val(null);
                         $("#codfisAz").val(null);
                         $("#parivaAz").val(null);
                         $("#localitaAz").val(null);
                         $("#dugAz").val(null);
                         $("#indirizzoAz").val(null);
                         $("#civicoAz").val(null);
                         $("#provAz").val(null);
                         $("#capAz").val(null);
                         $("#telefonoAz").val(null);
                         $("#comuneAz").val(null);
                         $("#emailAz").val(null);
                         $("#pecAz").val(null);
                    alert('Per questa posizione non é stata trovata nessuna azienda');
                },
                 complete: function ()
                     {


                },
              })
        });


    $("#tiprap").on('change', function () {
            var $option = $(this).find('option:selected');
            var a = $option.val();
        $("#contratto").removeAttr('disabled');
            if (a == 1) {
            $("#data_termine").show();
            $("#part_time").hide();
            $("#mesi").hide();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").hide();
            $("#da_al2").hide();
            $("#da_al3").hide();
            $("#durataperiodo2").hide();
            }

            if (a == 2) {
            $("#data_termine").show();
            $("#part_time").hide();
            $("#mesi").hide();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").hide();
            $("#da_al2").hide();
            $("#da_al3").hide();
            $("#durataperiodo2").hide();
            }

            if (a == 3) {
            $("#part_time").show();
            $("#mesi").hide();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").hide();
            $("#da_al2").hide();
            $("#da_al3").hide();
            $("#durataperiodo2").hide();
            }

            if (a == 4) {
            $("#part_time").show();
            $("#data_termine").show();
            $("#mesi").hide();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").hide();
            $("#da_al2").hide();
            $("#da_al3").hide();
            $("#durataperiodo2").hide();
            }
            if (a == 5) {
            $("#part_time").hide();
            $("#data_termine").show();
            $("#mesi").hide();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").hide();
            $("#da_al2").hide();
            $("#da_al3").hide();
            $("#durataperiodo2").hide();
            }

            if (a == 6) {
            $("#part_time").hide();
            $("#data_termine").hide();
            $("#mesi").hide();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").show();
            $("#da_al2").show();
            $("#da_al3").show();
            $("#durataperiodo2").show();
            }

            if (a == 7) {
            $("#mesi").hide();
            $("#data_termine").hide();
            $("#part_time").hide();
            $("#percentuale").hide();
            $("#durataperiodo").show();
            $("#da_al").show();
            $("#da_al2").show();
            $("#da_al3").show();
            $("#durataperiodo2").hide();
            }

            if (a == 8) {
            $("#part_time").show();
            $("#data_termine").hide();
            $("#mesi").hide();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").show();
            $("#da_al2").show();
            $("#da_al3").show();
            $("#durataperiodo2").show();
            }

            if (a == 9) {
            $("#data_termine").show();
           $("#mesi").hide();
            $("#part_time").hide();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").hide();
            $("#da_al2").hide();
            $("#da_al3").hide();
            $("#durataperiodo2").hide();
            }

            if (a == 10) {
            $("#mesi").hide();
            $("#data_termine").hide();
            $("#part_time").show();
            $("#percentuale").hide();
            $("#durataperiodo").show();
            $("#da_al").show();
            $("#da_al2").show();
            $("#da_al3").show();
            $("#durataperiodo2").hide();
            }

            if (a == 11) {
            $("#part_time").show();
            $("#mesi").show();
            $("#data_termine").hide();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").hide();
            $("#da_al2").hide();
            $("#da_al3").hide();
            $("#durataperiodo2").hide();
        }

        if (a == 12) {
            $("#data_termine").show();
             $("#part_time").hide();
            $("#mesi").hide();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").hide();
            $("#da_al2").hide();
            $("#da_al3").hide();
            $("#durataperiodo2").hide();
        }

        if (a == 13) {
            $("#data_termine").show();
            $("#part_time").show();
             $("#mesi").hide();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").hide();
            $("#da_al2").hide();
            $("#da_al3").hide();
            $("#durataperiodo2").hide();
        }

        if (a == 16) {
            $("#mesi").show();
            $("#data_termine").show();
             $("#part_time").hide();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").hide();
            $("#da_al2").hide();
            $("#da_al3").hide();
            $("#durataperiodo2").hide();
        }

        if (a == 17) {
            $("#mesi").show();
            $("#data_termine").hide();
           $("#part_time").hide();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").hide();
            $("#da_al2").hide();
            $("#da_al3").hide();
            $("#durataperiodo2").hide();
        }

        if (a == 1 || a == 14) {
            $("#mesi").hide();
            $("#data_termine").hide();
             $("#part_time").hide();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").hide();
            $("#da_al2").hide();
            $("#da_al3").hide();
            $("#durataperiodo2").hide();
        }

        if (a == 20 || a == 21) {
            $("#mesi").hide();
            $("#data_termine").hide();
            $("#part_time").show();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").show();
            $("#da_al2").show();
            $("#da_al3").show();
            $("#durataperiodo2").hide();
        }

        if (a == 15) {
            $("#mesi").hide();
            $("#data_termine").show();
            $("#part_time").show();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").hide();
            $("#da_al2").hide();
            $("#da_al3").hide();
            $("#durataperiodo2").hide();
        }

        if (a == 18 || a == 19) {
            $("#mesi").hide();
            $("#data_termine").hide();
            $("#part_time").show();
            $("#percentuale").hide();
            $("#durataperiodo").hide();
            $("#da_al").show();
            $("#da_al2").show();
            $("#da_al3").show();
            $("#durataperiodo2").hide();
        }

    });

    $("#tiprap").on('change', function () {

        var datIni = $('#datisc').val();
        var strAzione = "INSERIMENTO";
        $('body').addClass('wait');
     $.ajax({

               url:'@Url.Action("DdlContratto", "Amministrativo")',
         data: { 'datIni': datIni, 'strAzione': strAzione },
              success: function (data) {
                  $("#contratto").removeAttr('disabled');
                  var s = '<option value="-1"></option>';
                  for (var i = 0; i < data.length; i++) {
                      s += '<option id="contratto" value="' + data[i].CODCON + '">' + data[i].DENCON + '</option>';
                  }

                  $("#contratto").html(s);

                  $("#datAssunzione").val(datIni);

               },
         error: function ()
         {
             $('body').removeClass('wait');
                 alert('Errore: Inserire data di Iscrizione e selezionare Tipo di Rapporto');
         },
         complete: function ()
         {

             $('body').removeClass('wait');

          }
      })
    });


    $('#contratto').on('change', function () {
        var $option = $(this).find('option:selected');
        var dencon = $option.text();
        var codcon = $option.val();
        var livello = $('#livello').val();
        $("#rowtable").attr("hidden", true);
     $.ajax({

       url:'@Url.Action("DdlLivello", "Amministrativo")',
         data: { 'codcon': codcon,'dencon':dencon },
         success: function (datal)
         {
             $('#livello').removeAttr('disabled');
             $("#aliqCont").removeAttr('disabled');
              var s = '<option value="-1" selected disabled></option>';
             for (var i = 0; i < datal.length; i++) {
                 s += '<option value="' + datal[i].codliv + '">' + datal[i].denliv + '</option>';

              }
             $("#denconnew").val(dencon);
              $("#livello").html(s);

         },
         error: function ()
         {
           alert('Errore');
         },
         complete: function ()
         {
             Mensilita(dencon);
             Aliquote(dencon, codcon);
         },
     })
    });


    function Mensilita(dencon) {

             $.ajax({

                 url: '@Url.Action("Mensilita", "Amministrativo")',
                 data: {  'dencon': dencon },
                 success: function (datam) {
                     $('#qualifica').removeAttr('disabled');
                     s = '<option selected value="' + datam.qualifica + '">' + datam.qualifica + '</option>';
                     $("#qualifica").html(s);
                     $("#mensilita").val(datam.mensilita);
                     $("#mens14").val(datam.m14);
                     $("#mens15").val(datam.m15);
                     $("#mens16").val(datam.m16);
                     $("#TIPSPE").val(datam.tipspe);
                     $("#CODLOC").val(datam.codloc);
                 },
                 error: function () {

                 },
                 complete: function () {

                 },

             });
    }

     function Aliquote(dencon, codcon) {
         var datnas = $('#datnas').val();
         var codpos = $('#codposAz').val();
             $.ajax({

                 url: '@Url.Action("DdlAliquota", "Amministrativo")',
                 data: { 'datnas': datnas, 'codcon': codcon, 'dencon': dencon, 'codpos': codpos },
                 success: function (datas) {
                     var s = '<option value="-1" selected disabled></option>';
                    /* s += '<option id="denconnew" value="' + dencon + '" hidden></option>';*/
                     for (var i = 0; i < datas.length; i++)
                     {
                         s += '<option value="' + datas[i].CODGRUASS + '">' + datas[i].DENGRUASS + '</option>';

                     }
                     $("#aliqCont").html(s);
                     $("#TOTALIQ").val("");
                 },
                 error: function () {
                     alert('Per determinare correttamente le aliquote inserire la data di nascita!');
                 },
                 complete: function () {

                 },

             });
    }
  $("#aliqCont").on('change', function () {

        var $option = $(this).find('option:selected');
        var CODGRUASS = $option.val();
        var dencon = $('#denconnew').val();
        var dataNas = $('#datnas').val();
      var datIsc = $('#datisc').val();
      var datMod = $('#datDenuncia').val();
        var fap = $('#fap').is('checked');


     $.ajax({

         url: '@Url.Action("ValAliquota", "Amministrativo")',
         data: { 'CODGRUASS': CODGRUASS, 'dencon': dencon, 'datIsc': datIsc, 'datMod': datMod, 'dataNas': dataNas,'fap':fap },

         success: function (data)
         {
             $("#TOTALIQ").val(data.aliquota);
             $("#CODGRUASS").val(CODGRUASS);
             var CODQUACON = data.CODQUACON
             AliquotaSomma(CODGRUASS,CODQUACON);

},
         error: function ()
         {
           alert('Errore');
         },
         complete: function ()
         {
         },
     })
  });

    function AliquotaSomma(CODGRUASS, CODQUACON) {
        var CODGRUASS = CODGRUASS
        var FAP = $('#fap').is('checked');
        var STRDATA = $('#datnas').val();
        var CODQUACON = CODQUACON;
     $.ajax({

       url:'@Url.Action("DdlAliquotaSomma", "Amministrativo")',
         data: { 'CODQUACON': CODQUACON, 'CODGRUASS': CODGRUASS, 'STRDATA': STRDATA, 'FAP': FAP},
         success: function (datal)
         {

              var s = "";
             for (var i = 0; i < datal.length; i++) {
                 s += '<tr><td><label>' + datal[i].DENGRUASS + '</label></td><td><label>' + datal[i].ALIQUOTA + '</label></td> </tr>';
             }
             $("#rowtable").removeAttr('hidden');
             $("#tableBody").html(s);

},
         error: function ()
         {
           alert('Errore');
         },
         complete: function ()
         {
         },
     })
    };
        $("#livello").on('change', function () {
        var $option = $(this).find('option:selected');
        var codliv = $option.val();
        var dencon = $('#denconnew').val();
            var datMod = $('#datDenuncia').val();
        $.ajax({

         url: '@Url.Action("Emolumenti", "Amministrativo")',
            data: { 'codliv': codliv, 'dencon': dencon,  'datMod': datMod},

         success: function (data)
         {
             $("#emolumenti").val(data);
             $('#CODLIV').val(codliv);
},
         error: function ()
         {
           alert('Inserire data Denuncia!');
         },
         complete: function ()
         {
         },
     })
    });

    $("#scattiAnz").on('change', function () {


        var codliv = $("#livello").val();
        var datIsc = $('#datisc').val();
        var datMod = $('#datDenuncia').val();
        var numScatti = $('#scattiAnz').val();
        var dencon = $('#denconnew').val();
        var prorap = $('#PRORAP').val();
        var tiprap = $('#tiprap').val();
        var perPar = $('#perPar').val();

     $.ajax({

         url: '@Url.Action("SelLivello", "Amministrativo")',
         data: { 'numScatti': numScatti, 'dencon': dencon, 'codliv': codliv, 'datMod': datMod, 'datIsc': datIsc, 'prorap': prorap, 'tiprap': tiprap, 'perPar': perPar},

         success: function (data)
         {
             $("#importoSc").val(data);
             var a = (parseFloat($('#emolumenti').val().replace(".", "").replace(",", ".") || 0.00).toFixed(2));
             var b = (parseFloat($('#RetDichiarata').val().replace(",", ".") || 0.00).toFixed(2));
             var c = (parseFloat($('#importoSc').val().replace(",", ".") || 0.00).toFixed(2));
             var d = (parseFloat($('#S12').val().replace(",", ".") || 0.00).toFixed(2));
             var e = (parseFloat($('#S13').val().replace(",", ".") || 0.00).toFixed(2));
             var f = (parseFloat($('#S14').val().replace(",", ".") || 0.00).toFixed(2));
             var g = (parseFloat($('#S15').val().replace(",", ".") || 0.00).toFixed(2));
             var h = (parseFloat($('#S16').val().replace(",", ".") || 0.00).toFixed(2));

             var sum = 0;
             sum = parseFloat(a) + parseFloat(b) + parseFloat(c) + parseFloat(d) + parseFloat(e) + parseFloat(f) + parseFloat(g) + parseFloat(h);
             var totale = sum.toFixed(2).toString().replace(".", ",")
             $("#totaleS").val(totale);
},
         error: function ()
         {
           alert('Errore');
         },
         complete: function ()
         {
         },
     })
    });

    $("#datProtocollo").on('change', function () {
        var dataP = $("#datProtocollo").val();
        var today = new Date();
        var dd = String(today.getDate()).padStart(2, '0');
        var mm = String(today.getMonth() + 1).padStart(2, '0');
        var yyyy = today.getFullYear();
        var doggi = yyyy + '-' + mm + '-' + dd;

        if (new Date(dataP) > new Date(doggi)) {
            $("#datProtocollo").val(null);
            alert('La Data del Protocollo non può essere maggiore della data odierna');
        }



    });
    $("#datDenuncia").on('change', function () {
        var dataD = $("#datDenuncia").val();
        var today = new Date();
        var dd = String(today.getDate()).padStart(2, '0');
        var mm = String(today.getMonth() + 1).padStart(2, '0');
        var yyyy = today.getFullYear();
        var doggi = yyyy + '-' + mm + '-' + dd;
        var dataP = $("#datProtocollo").val();
        if (new Date(dataD) > new Date(doggi)) {
            $("#datDenuncia").val(null);
            alert('La Data della Denuncia non può essere maggiore della data odierna');
        }
        if (new Date(dataP) < new Date(dataD)) {
            $("#datDenuncia").val(null);
            alert('La Data della Denuncia non può essere maggiore della data del Protocollo');
        }

    });

    //CONTROLLO INPUT SOLO NUMERI SEGUITI DA VIRGOLA CON 2 DECIMALI
    function setInputFilter(textbox, inputFilter) {
        ["input", "keydown", "keyup", "mousedown", "mouseup", "select", "contextmenu", "drop"].forEach(function (event) {
            textbox.addEventListener(event, function () {
                if (inputFilter(this.value)) {
                    this.oldValue = this.value;
                    this.oldSelectionStart = this.selectionStart;
                    this.oldSelectionEnd = this.selectionEnd;
                } else if (this.hasOwnProperty("oldValue")) {
                    this.value = this.oldValue;
                    this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);
                } else {
                    this.value = "";
                }
            });
        });
    }
    setInputFilter(document.getElementById("importoSc"), function (value) {
        return /^-?\d*[,]?\d{0,2}$/.test(value);
    });
    setInputFilter(document.getElementById("S12"), function (value) {
        return /^-?\d*[,]?\d{0,2}$/.test(value);
    });
    setInputFilter(document.getElementById("S13"), function (value) {
        return /^-?\d*[,]?\d{0,2}$/.test(value);
    });
    setInputFilter(document.getElementById("S14"), function (value) {
        return /^-?\d*[,]?\d{0,2}$/.test(value);
    });
    setInputFilter(document.getElementById("scattiAnz"), function (value) {
        return /^\d*$/.test(value) && (value === "" || parseInt(value) <= 99);
    });

    //SOMMA DEI TOTOTALI
    $(document).on('change', function () {

        var a = (parseFloat($('#emolumenti').val().replace(".", "").replace(",", ".") || 0.00).toFixed(2));
        var b = (parseFloat($('#RetDichiarata').val().replace(",", ".") || 0.00).toFixed(2));
        var c = (parseFloat($('#importoSc').val().replace(",", ".") || 0.00).toFixed(2));
        var d = (parseFloat($('#S12').val().replace(",", ".") || 0.00).toFixed(2));
        var e = (parseFloat($('#S13').val().replace(",", ".") || 0.00).toFixed(2));
        var f = (parseFloat($('#S14').val().replace(",", ".") || 0.00).toFixed(2));
        var g = (parseFloat($('#S15').val().replace(",", ".") || 0.00).toFixed(2));
        var h = (parseFloat($('#S16').val().replace(",", ".") || 0.00).toFixed(2));

        var sum = 0;
        sum = parseFloat(a) + parseFloat(b) + parseFloat(c) + parseFloat(d) + parseFloat(e) + parseFloat(f) + parseFloat(g) + parseFloat(h);
         var totale = sum.toFixed(2).toString().replace(".", ",")
        $("#totaleS").val(totale);
    });
</script>
<script>
    function autocomplete(inp, arr) {
        /*the autocomplete function takes two arguments,
        the text field element and an array of possible autocompleted values:*/
        var currentFocus;
        /*execute a function when someone writes in the text field:*/
        inp.addEventListener("input", function (e) {
            var a, b, i, val = this.value;
            /*close any already open lists of autocompleted values*/
            closeAllLists();
            if (!val) { return false; }
            currentFocus = -1;
            /*create a DIV element that will contain the items (values):*/
            a = document.createElement("DIV");
            a.setAttribute("id", this.id + "autocomplete-list");
            a.setAttribute("class", "autocomplete-items");
            /*append the DIV element as a child of the autocomplete container:*/
            this.parentNode.appendChild(a);
            /*for each item in the array...*/
            for (i = 0; i < arr.length; i++) {
                /*check if the item starts with the same letters as the text field value:*/
                if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                    /*create a DIV element for each matching element:*/
                    b = document.createElement("DIV");
                    /*make the matching letters bold:*/
                    b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
                    b.innerHTML += arr[i].substr(val.length);
                    /*insert a input field that will hold the current array item's value:*/
                    b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
                    /*execute a function when someone clicks on the item value (DIV element):*/
                    b.addEventListener("click", function (e) {
                        /*insert the value for the autocomplete text field:*/
                        inp.value = this.getElementsByTagName("input")[0].value;
                        /*close the list of autocompleted values,
                        (or any other open lists of autocompleted values:*/
                        closeAllLists();
                    });
                    a.appendChild(b);
                }
            }
        });
        /*execute a function presses a key on the keyboard:*/
        inp.addEventListener("keydown", function (e) {
            var x = document.getElementById(this.id + "autocomplete-list");
            if (x) x = x.getElementsByTagName("div");
            if (e.keyCode == 40) {
                /*If the arrow DOWN key is pressed,
                increase the currentFocus variable:*/
                currentFocus++;
                /*and and make the current item more visible:*/
                addActive(x);
            } else if (e.keyCode == 38) { //up
                /*If the arrow UP key is pressed,
                decrease the currentFocus variable:*/
                currentFocus--;
                /*and and make the current item more visible:*/
                addActive(x);
            } else if (e.keyCode == 13) {
                /*If the ENTER key is pressed, prevent the form from being submitted,*/
                e.preventDefault();
                if (currentFocus > -1) {
                    /*and simulate a click on the "active" item:*/
                    if (x) x[currentFocus].click();
                }
            }
        });
        function addActive(x) {
            /*a function to classify an item as "active":*/
            if (!x) return false;
            /*start by removing the "active" class on all items:*/
            removeActive(x);
            if (currentFocus >= x.length) currentFocus = 0;
            if (currentFocus < 0) currentFocus = (x.length - 1);
            /*add class "autocomplete-active":*/
            x[currentFocus].classList.add("autocomplete-active");
        }
        function removeActive(x) {
            /*a function to remove the "active" class from all autocomplete items:*/
            for (var i = 0; i < x.length; i++) {
                x[i].classList.remove("autocomplete-active");
            }
        }
        function closeAllLists(elmnt) {
            /*close all autocomplete lists in the document,
            except the one passed as an argument:*/
            var x = document.getElementsByClassName("autocomplete-items");
            for (var i = 0; i < x.length; i++) {
                if (elmnt != x[i] && elmnt != inp) {
                    x[i].parentNode.removeChild(x[i]);
                }
            }
        }
        /*execute a function when someone clicks in the document:*/
        document.addEventListener("click", function (e) {
            closeAllLists(e.target);
        });
    }

    /*An array containing all the country names in the world:*/
    var stringArray = @Html.Raw(Json.Encode(HttpContext.Current.Items["ListaComuni"]));
    var stringArray2 = @Html.Raw(Json.Encode(HttpContext.Current.Items["ListaStati"]));


    /*initiate the autocomplete function on the "myInput" element, and pass along the countries array as possible autocomplete values:*/
    autocomplete(document.getElementById("comune"), stringArray);
    autocomplete(document.getElementById("statoEs"), stringArray2);

</script>